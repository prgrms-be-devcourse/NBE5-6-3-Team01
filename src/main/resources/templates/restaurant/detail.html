<!DOCTYPE html>
<html lang="ko" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout}">

<head>
    <meta charset="UTF-8">
    <title>ì‹ë‹¹ ìƒì„¸</title>
    <link rel="stylesheet" href="/css/detail.css">


</head>
<body>
<main layout:fragment="content">
    <div style="display: flex;">
        <div id="dtl" style="width: 35%; height: 100%;">
        <div class="restaurant-info"> <!-- ì™¼ìª½ ìƒì„¸ ì •ë³´ -->

            <!-- ì‹ë‹¹ ì´ë¦„ -->
            <div class="main-main">
            <span class="main-title" th:text="${restaurant.name}">ì‹ë‹¹ëª…</span>
            <span class="main-branch" th:text="${restaurant.branch}">ì§€ì ëª…</span>
            <span class="category-list" th:text="${restaurant.category}">ì¹´í…Œê³ ë¦¬</span>

            </div>

            <!-- ë²„íŠ¼ -->
            <div class="action-buttons">
                <div class="action-item">
                    <img src="/img/location.png" alt="ìœ„ì¹˜ ë³´ê¸°" class="action-icon">
                    <span>ìœ„ì¹˜ ë³´ê¸°</span>
                </div>
                <div class="action-item">
                    <img src="/img/bookmark.png" alt="ë¶ë§ˆí¬" class="action-icon">
                    <span>ë¶ë§ˆí¬</span>
                </div>
                <div class="action-item">
                    <img src="/img/share.png" alt="ê³µìœ í•˜ê¸°" class="action-icon">
                    <span>ê³µìœ í•˜ê¸°</span>
                </div>
            </div>

            <!-- ì •ë³´ ì„¹ì…˜ -->
            <div class="info-section">
                <p th:if="${!#strings.isEmpty(restaurant.address)}">
                    <strong>ì£¼ì†Œ</strong> <span th:text="${restaurant.address}">ì£¼ì†Œ</span>
                </p>
                <p th:if="${restaurant.detail != null and !#strings.isEmpty(restaurant.detail.tel)}">
                    <strong>ì—°ë½ì²˜</strong> <span th:text="${restaurant.detail.tel}">ì—°ë½ì²˜</span>
                </p>
                <p th:if="${restaurant.detail != null and !#strings.isEmpty(restaurant.detail.homePageURL)}">
                    <strong>í™ˆí˜ì´ì§€</strong>
                    <a th:href="@{${restaurant.detail.homePageURL}}"
                       th:text="${restaurant.detail.homePageURL}"
                       class="homepage-url"
                       target="_blank"
                       rel="noopener noreferrer">
                    </a>
                </p>

                <p th:if="${restaurant.detail != null and !#strings.isEmpty(restaurant.detail.dayOff)}">
                    <strong>íœ´ë¬´ì¼</strong> <span th:text="${restaurant.detail.dayOff}">íœ´ë¬´ì¼</span>
                </p>
                <p th:if="${restaurant.detail != null and !#strings.isEmpty(restaurant.detail.rowBusinessTime)}">
                    <strong>ì˜ì—…ì‹œê°„</strong> <span th:text="${restaurant.detail.rowBusinessTime}">ì˜ì—…ì‹œê°„</span>
                </p>
            </div>

            <!--     ë©”ë‰´     -->
            <div>
                <h2 class="menu-title">ë©”ë‰´</h2>

                <div th:if="${topMenus != null and !topMenus.isEmpty()}" class="menu-list">
                    <div th:each="menu : ${topMenus}" class="menu-card">
                        <div class="menu-info">
                            <p class="menu-name" th:text="${menu.name}">ë©”ë‰´ëª…</p>
                            <p class="menu-price" th:text="${#numbers.formatInteger(menu.price, 3, 'COMMA') + 'ì›'}">ê°€ê²©</p>
                        </div>
                    </div>
                </div>

                <div th:unless="${topMenus != null and !topMenus.isEmpty()}" class="none-menu-card">
                    <div class="menu-info">
                        <p>ë“±ë¡ëœ ë©”ë‰´ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>



            <div class="facility-section">
                <h2 class="menu-title">ì‹œì„¤ ì•ˆë‚´</h2>
                <p>
                    <strong>ë°°ë‹¬</strong>
                    <span th:if="${restaurant.detail.delivery}"> â˜ºï¸ê°€ëŠ¥í•´ìš”</span>
                    <span th:unless="${restaurant.detail.delivery}"> ğŸ˜¢ì–´ë ¤ì›Œìš”</span>
                </p>
                <p>
                    <strong>ì£¼ì°¨</strong>
                    <span th:if="${restaurant.detail.parking}"> â˜ºï¸ê°€ëŠ¥í•´ìš”</span>
                    <span th:unless="${restaurant.detail.parking}"> ğŸ˜¢ì–´ë ¤ì›Œìš”</span>
                </p>
                <p>
                    <strong>ì™€ì´íŒŒì´</strong>
                    <span th:if="${restaurant.detail.wifi}"> â˜ºï¸ì œê³µí•´ìš”</span>
                    <span th:unless="${restaurant.detail.wifi}"> ğŸ˜¢ì œê³µí•˜ì§€ ì•Šì•„ìš”</span>
                </p>
            </div>

        </div>

        </div>
        <div id="map" style="width: 65%; height: 730px;"></div>
    </div>

    <script th:src="@{('https://dapi.kakao.com/v2/maps/sdk.js?appkey=' + ${kakaoMapApiKey} + '&libraries=services')}"></script>
    <script th:inline="javascript">
        var lat = [[${restaurant.latitude}]];
        var lng = [[${restaurant.longitude}]];

        var mapContainer = document.getElementById('map'), // ì§€ë„ë¥¼ í‘œì‹œí•  div
            mapOption = {
                center: new kakao.maps.LatLng(lat, lng), // ì§€ë„ì˜ ì¤‘ì‹¬ì¢Œí‘œ
                level: 1 // ì§€ë„ì˜ í™•ëŒ€ ë ˆë²¨
            };

        // ì§€ë„ë¥¼ í‘œì‹œí•  divì™€  ì§€ë„ ì˜µì…˜ìœ¼ë¡œ  ì§€ë„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        var map = new kakao.maps.Map(mapContainer, mapOption);

        // ë§ˆì»¤ê°€ í‘œì‹œë  ìœ„ì¹˜ì…ë‹ˆë‹¤
        var markerPosition  = new kakao.maps.LatLng(lat, lng);

        // ë§ˆì»¤ë¥¼ ìƒì„±í•©ë‹ˆë‹¤
        var marker = new kakao.maps.Marker({
            position: markerPosition
        });

        // ë§ˆì»¤ê°€ ì§€ë„ ìœ„ì— í‘œì‹œë˜ë„ë¡ ì„¤ì •í•©ë‹ˆë‹¤
        marker.setMap(map);
    </script>

</main>
</body>
</html>
