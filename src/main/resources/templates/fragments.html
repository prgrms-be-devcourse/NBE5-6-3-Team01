<!DOCTYPE html>
<html lang="ko"
      xmlns:sec="http://www.w3.org/1999/xhtml">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body>
<th:block th:fragment="frg_sidenav">
  <aside class="p-2 w-24 bg-gray-200 min-h-screen flex flex-col items-center py-10" style="flex: 1; height: 100vh;">
    <!-- ë¡œê³  -->
    <div class="mb-12">
      <a href="/" class="flex flex-col text-black items-center justify-center">
        <span class="text-xl">ğŸ˜</span>
        <span class="text-xl">ë°¥ë¡œë“œ</span>
      </a>
    </div>

    <!-- ë©”ë‰´ ì•„ì´ì½˜ë“¤ -->
    <div class="flex flex-col items-center space-y-3 flex-grow w-full">
      <a href="/search"
         class="w-full p-2 flex flex-col text-black items-center justify-center space-y-2 hover:bg-gray-300 rounded">
        <img src="/img/search.png" alt="ê²€ìƒ‰" class="w-5 h-5"/>
        <span class="text-xs">ê²€ìƒ‰</span>
      </a>
      <a href="/curation"
         class="w-full p-2 flex flex-col text-black items-center justify-center space-y-2 hover:bg-gray-300 rounded">
        <img src="/img/curation.png" alt="íë ˆì´íŒ…" class="w-6 h-6"/>
        <span class="text-xs">íë ˆì´íŒ…</span>
      </a>
      <a href="/recommend"
         class="w-full p-2 flex flex-col text-black items-center justify-center space-y-2 hover:bg-gray-300 rounded">
        <img src="/img/llm.png" alt="LLM ì¶”ì²œ" class="w-6 h-6"/>
        <span class="text-xs">AI ì¶”ì²œ</span>
      </a>
      <a href="/meetings"
         class="w-full p-2 flex flex-col text-black items-center justify-center space-y-2 hover:bg-gray-300 rounded">
        <img src="/img/meeting.png" alt="ëª¨ì„" class="w-6 h-6"/>
        <span class="text-xs">ëª¨ì„</span>
      </a>
      <a href="/bookmarks"
         class="w-full p-2 flex flex-col text-black items-center justify-center space-y-2 hover:bg-gray-300 rounded">
        <img src="/img/bookmark.png" alt="ë¶ë§ˆí¬" class="w-6 h-6"/>
        <span class="text-xs">ë¶ë§ˆí¬</span>
      </a>
      <a href="/ranking"
         class="w-full p-2 flex flex-col text-black items-center justify-center space-y-2 hover:bg-gray-300 rounded">
        <img src="/img/ranking.png" alt="ë­í‚¹" class="w-6 h-6"/>
        <span class="text-xs">ë­í‚¹</span>
      </a>
    </div>

    <div class="flex flex-col items-center mt-auto">
      <!-- ë¡œê·¸ì¸ ì‹œ: ë§ˆì´í˜ì´ì§€, ë¡œê·¸ì•„ì›ƒ -->
      <div sec:authorize="isAuthenticated()" class="flex flex-col items-center space-y-6 mt-auto">
        <a href="#" id="logout-btn" class="flex flex-col items-center justify-center space-y-1">
          <img src="/img/logout.png" alt="ë¡œê·¸ì•„ì›ƒ" class="w-6 h-6"/>
        </a>
        <a th:href="@{/mypage}" class="flex flex-col items-center justify-center space-y-1">
          <img src="/img/mypage.png" alt="ë§ˆì´í˜ì´ì§€" class="w-6 h-6"/>
        </a>
      </div>

      <!-- ë¯¸ë¡œê·¸ì¸ ì‹œ: ë¡œê·¸ì¸, íšŒì›ê°€ì… -->
      <div sec:authorize="isAnonymous()" class="flex flex-col items-center space-y-6 mt-auto">
        <a th:href="@{/user/signin}" class="flex flex-col items-center justify-center space-y-1">
          <img src="/img/login.png" alt="ë¡œê·¸ì¸" class="w-6 h-6"/>
        </a>
        <a th:href="@{/user/signup}" class="flex flex-col items-center justify-center space-y-1">
          <img src="/img/signup.png" alt="íšŒì›ê°€ì…" class="w-6 h-5.8"/>
        </a>
      </div>
    </div>
  </aside>


<script>
  document.getElementById('logout-btn')?.addEventListener('click', async (e) => {
    e.preventDefault();

    try {
      const res = await fetch('/api/auth/logout', {
        method: 'POST',
        credentials: 'include'
      });

      if (res.ok) {
        alert('ë¡œê·¸ì•„ì›ƒ ì™„ë£Œ');
        location.href = '/';
      } else {
        alert('ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨');
      }
    } catch (err) {
      alert('ì„œë²„ ì˜¤ë¥˜ ë°œìƒ');
      console.error(err);
    }
  });
</script>
</th:block>
</body>
</html>